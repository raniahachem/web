{% extends 'frontbase.html.twig' %}

{% block body %}

    <!-- Carousel Start -->
    <div class="container-fluid p-0 mb-5 wow fadeIn" data-wow-delay="0.1s">
        <div id="header-carousel" class="carousel slide" data-bs-ride="carousel">
            <div class="carousel-inner">
                <div class="carousel-item active">
<video class="w-100" autoplay loop muted>
  <source src="img/autoxpress.mp4" type="video/mp4">

</video>                    <div class="carousel-caption d-flex align-items-center justify-content-center text-start">
                        <div class="mx-sm-5 px-5" style="max-width: 900px;">
                            <h1 class="display-2 text-white text-uppercase mb-4 animated slideInDown">Get a ride in minutes</h1>
                            <h4 class="text-white text-uppercase mb-4 animated slideInDown"> <span class="fa fa-map-marker-alt text-primary"></span> Gazzela, Ariana, Ariana soghra</h4>
                            <h4 class="text-white text-uppercase mb-4 animated slideInDown"><span class="fa fa-phone-alt text-primary"></span>+216 70 445 400</h4>
                         </div>
                    </div>
                </div>
                <div class="carousel-item">
               <video class="w-100" autoplay loop muted>
               <source src="img/autoxpress2.mp4" type="video/mp4" alt ="image">
                 </video>                           <div class="carousel-caption d-flex align-items-center justify-content-center text-start">
                        <div class="mx-sm-5 px-5" style="max-width: 900px;">
                            <h1 class="display-2 text-white text-uppercase mb-4 animated slideInDown">Get a ride in minutes</h1>
                           <h4 class="text-white text-uppercase mb-4 animated slideInDown"> <span class="fa fa-map-marker-alt text-primary"></span> Gazzela, Ariana, Ariana soghra</h4>
                            <h4 class="text-white text-uppercase mb-4 animated slideInDown"><span class="fa fa-phone-alt text-primary"></span>+216 70 445 400</h4>
                         </div>
                    </div>
                </div>
            </div>
            <button class="carousel-control-prev" type="button" data-bs-target="#header-carousel"
                data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#header-carousel"
                data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Next</span>
            </button>
        </div>
    </div>
    <!-- Carousel End -->

<section id="about">
    <!-- About Start -->
    <div class="container-xxl py-5">
        <div class="container">
            <div class="row g-5">
                <div class="col-lg-6 wow fadeIn" data-wow-delay="0.1s">
                    <div class="d-flex flex-column">
                        <img class="img-fluid w-75 align-self-end" src="img/carpool.jpg" alt="">
                        <div class="w-50 bg-secondary p-5" style="margin-top: -25%;">
                            <h1 class="text-uppercase text-primary mb-3">Join US </h1>
                            <h2 class="text-uppercase mb-0">Quickly!</h2>
                        </div>
                    </div>
                </div>
                <div class="col-lg-6 wow fadeIn" data-wow-delay="0.5s">
                    <p class="d-inline-block bg-secondary text-primary py-1 px-4">About Us</p>
                    <h1 class="text-uppercase mb-4">WHERE RIDERS AND DRIVERS CONNECT. Learn More About Us!</h1>
                          <p> AutoXpress is the ultimate transportation solution for both drivers and riders.
                     Our innovative platform connects drivers with riders,
                      providing a fast and reliable way to get around the city. 
                      For riders, our premium transportation service offers quick and easy rides at affordable prices, 
                      making it the perfect choice for all your transportation needs. 
                      Whether you're running errands, heading to a meeting, or just need a ride across town,
                       AutoXpress is here for you.
                      For drivers, AutoXpress is the perfect opportunity to turn your car into a money-making machine.
                       By joining our platform, you can earn extra income by providing rides to riders in your area.
                        With flexible hours and the ability to work whenever you want, 
                        becoming an AutoXpress driver is the perfect way to supplement your income.

                    <p class="mb-4">So why wait? Whether you're a rider looking for a fast and reliable ride or a driver
                     looking to earn some extra income, sign up today and start enjoying the convenience of AutoXpress!</p>
                    </p> <div class="row g-4">
                        <div class="col-md-6">
                            <h3 class="text-uppercase mb-3">Since 2023</h3>
                        </div>
                        <div class="col-md-6">
                            <h3 class="text-uppercase mb-3">1000+ clients</h3>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </section>
    <!-- About End -->
 
<section id="service">
    <!-- Service Start -->
    <div class="container-xxl py-5">
        <div class="container">
            <div class="text-center mx-auto mb-5 wow fadeInUp" data-wow-delay="0.1s" style="max-width: 600px;">
                <p class="d-inline-block bg-secondary text-primary py-1 px-4">Services</p>
                <h1 class="text-uppercase">What We Provide</h1>
            </div>
            <div class="row g-4">
                <div class="col-lg-4 col-md-6 wow fadeInUp" data-wow-delay="0.1s">
                    <div class="service-item position-relative overflow-hidden bg-secondary d-flex h-100 p-5 ps-0">
                        <div class="bg-dark d-flex flex-shrink-0 align-items-center justify-content-center" style="width: 60px; height: 60px;">
                            <img class="img-fluid" src="img/ride.png" alt="">
                        </div>
                        <div class="ps-4">
                            <h3 class="text-uppercase mb-3">Ride</h3>
                            <p>Share a ride and save money with our ride service.</p>
                            <span class="text-uppercase text-primary">Join us</span>
                        </div>
                        <a class="btn btn-square" href=""><i class="fa fa-plus text-primary"></i></a>
                    </div>
                </div>
                
               
                <div class="col-lg-4 col-md-6 wow fadeInUp" data-wow-delay="0.3s">
                    <div class="service-item position-relative overflow-hidden bg-secondary d-flex h-100 p-5 ps-0">
                        <div class="bg-dark d-flex flex-shrink-0 align-items-center justify-content-center" style="width: 60px; height: 60px;">
                            <img class="img-fluid" src="img/drive.png" alt="">
                        </div>
                        <div class="ps-4">
                            <h3 class="text-uppercase mb-3">Drive</h3>
                            <p>Efficient and convenient driving service for your daily commute.</p>
                            <span class="text-uppercase text-primary">Join us</span>
                        </div>
                        <a class="btn btn-square" href=""><i class="fa fa-plus text-primary"></i></a>
                    </div>
                </div>
                <div class="col-lg-4 col-md-6 wow fadeInUp" data-wow-delay="0.5s">
                    <div class="service-item position-relative overflow-hidden bg-secondary d-flex h-100 p-5 ps-0">
                        <div class="bg-dark d-flex flex-shrink-0 align-items-center justify-content-center" style="width: 60px; height: 60px;">
                            <img class="img-fluid" src="img/deliver.png" alt="">
                        </div>
                        <div class="ps-4">
                            <h3 class="text-uppercase mb-3">Deliver</h3>
                            <p>Fast and reliable delivery service for your packages and parcels.</p>
                            <span class="text-uppercase text-primary">Join us</span>
                        </div>
                        <a class="btn btn-square" href=""><i class="fa fa-plus text-primary"></i></a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Service End -->
</section>


<section id="review">
 <!-- Testimonial Start -->
    <div class="container-xxl py-5">
        <div class="container">
            <div class="text-center mx-auto mb-5 wow fadeInUp" data-wow-delay="0.1s" style="max-width: 600px;">
                <p class="d-inline-block bg-secondary text-primary py-1 px-4">Review</p>
                <h1 class="text-uppercase">What Our Clients Say!</h1>
            </div>    {% for conducteur in conducteurData %}

  <div class="h-100 bg-secondary rounded p-4">
    <div class="d-flex align-items-center justify-content-between mb-2">
      <h6 class="mb-0">Ratings</h6>
<a href="{{ path('details_avis', { id: conducteur.getIdConducteur() }) }}">Details</a>
    </div>
    <div class="d-flex align-items-center border-bottom py-3">
      <img class="rounded-circle flex-shrink-0" src="{{ conducteur.getImageConducteur() }}" alt="" style="width: 40px; height: 40px; ">
      <div class="w-100 ms-3">
        <div class="d-flex w-100 justify-content-between">
          <h6 class="mb-0">{{ conducteur.getNomConducteur() }} {{ conducteur.getPrenomConducteur() }}</h6>
          {% set count = 0 %}
          {% set totalRating = 0 %}
          {% for avis in avisData %}
          {% if avis.conducteur.getIdConducteur() == conducteur.getIdConducteur() %}
          {% set totalRating = totalRating + avis.avis.getRating() %}
          {% set count = count + 1 %}
          {% endif %}
          {% endfor %}
          {% if count > 0 %}
          {% set moyenne = totalRating / count %}
          <small>{{ moyenne|number_format(1) }}</small>
          <div class="star-rating">
            {% for i in 1..5 %}
            {% if i <= moyenne %}
            <span class="fa fa-star checked"></span>
            {% elseif i <= moyenne + 0.5 %}
            <span class="fa fa-star-half checked"></span>
            {% else %}
            <span class="fa fa-star"></span>
            {% endif %}
            {% endfor %}
          </div>
          {% endif %}
        </div>

      </div>
    </div>
<div style="height: 300px; overflow-y: scroll;"class="bg-secondary rounded p-4">
  <div class="d-flex align-items-center justify-content-between mb-2">
    <h6 class="mb-0">Comments</h6>
  </div>
  <div class="comment-section">
    {% for item in commentaireData %}
      {% if item.commentaire.getIdConducteur() == conducteur.getIdConducteur() %}
        <div class="d-flex align-items-center border-bottom py-3">
          <img class="rounded-circle flex-shrink-0" src="img/profile.png" alt="" style="width: 40px; height: 40px;">
          <div class="w-100 ms-3">
            <div class="d-flex w-100 justify-content-between">
              <h6 class="mb-0">{{ item.client.getNomClient() }} {{ item.client.getPrenomClient() }}</h6>
              <small>{{ item.commentaire.getDate()|date('Y-m-d H:i:s')}}</small>
            </div>
            <span>{{ item.commentaire.getContenu() }}</span>
          </div>
        </div>
      {% endif %}
    {% endfor %}
  </div>
</div>

    {% endfor %}

  </div>
  </div>

</section>



 




 



        <!-- Back to Top -->
        <a href="#" class="btn btn-lg btn-primary btn-lg-square back-to-top"><i class="bi bi-arrow-up"></i></a>
    </div>

    

    <!-- Template Javascript -->
 <script>
  const conducteurs = document.querySelectorAll(".driver-rating");

  for (let i = 0; i < conducteurs.length; i++) {
    const stars = conducteurs[i].querySelectorAll(".fa-star");

    for (let j = 0; j < stars.length; j++) {
      stars[j].addEventListener("click", function() {
        const ratingInput = conducteurs[i].parentNode.querySelector(".driver-rating-value");
        const index = parseInt(this.getAttribute("data-rating"));
        
        for (let k = 0; k < stars.length; k++) {
          if (k < index) {
            stars[k].classList.add("rated");
          } else {
            stars[k].classList.remove("rated");
          }
        }
        
        ratingInput.value = index;
      });
    }
  }
</script>
 <script>
  const conducteurs = document.querySelectorAll(".driver-rating");

  for (let i = 0; i < conducteurs.length; i++) {
    const stars = conducteurs[i].querySelectorAll(".fa-star");

    for (let j = 0; j < stars.length; j++) {
      stars[j].addEventListener("click", function() {
        const ratingInput = conducteurs[i].parentNode.querySelector(".driver-rating-value");
        const index = parseInt(this.getAttribute("data-rating"));
        
        for (let k = 0; k < stars.length; k++) {
          if (k < index) {
            stars[k].classList.add("rated");
          } else {
            stars[k].classList.remove("rated");
          }
        }
        
        ratingInput.value = index;
      });
    }
  }
</script>
<style>
  .fa-star {
    color: #ccc;
    cursor: pointer;
    font-size: 1.5rem;
    transition: all 0.2s ease-in-out;
  }

  .fa-star.rated,
  .fa-star.hovered {
    color: yellow;
  }
.star-rating {
  display: inline-block;
  font-size: 20px;
  line-height: 1;
}

.fa-star {
  color: #ccc;
}

.checked {
  color: #f7d32b;
}


  #avis-form-container {
  display: block;
}

#avis-form-container.hidden {
  display: none;
}
</style>
<script>
const addCommentBtn = document.querySelector('.add-comment-btn');
const commentFormContainer = document.querySelector('#comment-form-container');

addCommentBtn.addEventListener('click', () => {
    if (commentFormContainer.hasAttribute('hidden')) {
        commentFormContainer.removeAttribute('hidden');
    } else {
        commentFormContainer.setAttribute('hidden', '');
    }
});
</script>
<script>
  $(document).on('click', '.delete-item', function(e) {
    e.preventDefault();
    
    var url = $(this).attr('href');
    var id = $(this).data('id');
    
    if (confirm('Are you sure you want to delete this item?')) {
      $.ajax({
        url: url,
        method: 'DELETE',
        data: {
          id: id
        },
        success: function(response) {
          // Redirect to the client page after successful deletion
          window.location.href = '{{ path('app_client') }}';
        },
        error: function(xhr, status, error) {
          console.log(error);
        }
      });
    }
  });
  
</script>
<script>
  $('.update-item').on('click', function(e) {
    e.preventDefault();
    var id = $(this).data('id');
    // show alert here
    alert('Edit the comment with ID ' + id);
    // redirect to the update item page or show a modal
    window.location.href = $(this).attr('href');
  });
</script>
<script>
$(document).ready(function() {
  $('.dropdown-toggle').on('click', function() {
    $(this).siblings('.dropdown-menu').toggle();
  });
  
  $('.delete-item').on('click', function(e) {
    e.preventDefault();
    var itemId = $(this).data('id');
    // make an AJAX call to delete the item
    $.ajax({
      url: '/delete_item/' + itemId,
      type: 'DELETE',
      success: function(response) {
        // reload the page or update the UI
      },
      error: function(xhr, status, error) {
        console.log('Error:', error);
      }
    });
  });
  
$('.update-item').on('click', function(e) {
  e.preventDefault();
  var id = $(this).data('id');
  var contenu = $(this).data('contenu');
  $('#editCommentModal').find('form').attr('action', '/commentaireclientupdate/' + id);
  $('#editCommentModal').find('#contenu').val(contenu);
  $('#editCommentModal').modal('show');
});

});
</script>


    <!-- Template Javascript -->
    <script>(function ($) {
    "use strict";

    // Spinner
    var spinner = function () {
        setTimeout(function () {
            if ($('#spinner').length > 0) {
                $('#spinner').removeClass('show');
            }
        }, 1);
    };
    spinner();
    
    
    // Initiate the wowjs
    new WOW().init();


    // Sticky Navbar
    $(window).scroll(function () {
        if ($(this).scrollTop() > 300) {
            $('.sticky-top').addClass('shadow-sm').css('top', '0px');
        } else {
            $('.sticky-top').removeClass('shadow-sm').css('top', '-100px');
        }
    });
    
    
    // Back to top button
    $(window).scroll(function () {
        if ($(this).scrollTop() > 300) {
            $('.back-to-top').fadeIn('slow');
        } else {
            $('.back-to-top').fadeOut('slow');
        }
    });
    $('.back-to-top').click(function () {
        $('html, body').animate({scrollTop: 0}, 1500, 'easeInOutExpo');
        return false;
    });


    // Testimonials carousel
    $('.testimonial-carousel').owlCarousel({
        autoplay: true,
        smartSpeed: 1000,
        loop: true,
        nav: false,
        dots: true,
        items: 1,
        dotsData: true,
    });

    
})(jQuery);

</script>
<script>
const addCommentBtn = document.querySelector('.add-avis-btn');
const commentFormContainer = document.querySelector('#avis-form-container');

addCommentBtn.addEventListener('click', () => {
  commentFormContainer.classList.toggle('hidden');
});
</script>

<script>
function checkComment(id_conducteur) {
    var contenu = document.getElementById("floatingTextarea" + id_conducteur).value;
    if (contenu.trim() === '') {
        alert("Le contenu est vide!");
        return false;
    }
    return true;
}

</script>
<style>

/* For Chrome, Edge, and Safari */
div::-webkit-scrollbar {
  width: 8px;
}

div::-webkit-scrollbar-track {
  background: #f5f5f5;
}

div::-webkit-scrollbar-thumb {
  background-color: #ccc;
  border-radius: 20px;
  border: 3px solid #f5f5f5;
}

/* For Firefox */
div {
  scrollbar-width: thin;
  scrollbar-color: #ccc #f5f5f5;
}

div::-moz-scrollbar {
  width: 8px;
}

div::-moz-scrollbar-track {
  background: #f5f5f5;
}

div::-moz-scrollbar-thumb {
  background-color: #ccc;
  border-radius: 20px;
  border: 3px solid #f5f5f5;
}
</style>
    <script src="js/main.js"></script>

{% endblock %}
